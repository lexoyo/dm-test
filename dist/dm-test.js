function h(a){if(a.d)return a.d();if(!(a instanceof Array))throw Error();var c=0;return{next:function(){return c==a.length?{a:!0}:{a:!1,value:a[c++]}}}}function l(a){var c=p;function b(){}b.prototype=c.prototype;a.j=c.prototype;a.prototype=new b;a.prototype.constructor=a;a.i=function(a,b,k){return c.prototype[b].apply(a,Array.prototype.slice.call(arguments,2))}}function p(a,c,b){q="article";s="tag";this.id=a;this.name=c;this.g=b;this.c=null;t={}}var q,s,t;
p.prototype.b=function(){this.c||(this.c=[],this.g.forEach(function(a){this.tag[a.toString()]=t[a.toString()];this.tag[a].b()}))};function u(a){return a.c.reduce(function(a,b){return a.concat(b,u(b))},[])}p.prototype.toString=function(){return this.name+": "+u(this).join(", ")};function v(a,c,b){p.constructor(a,c,b)}l(v);function w(a,c,b){p.constructor(a,c,b)}l(w);function x(){y=10;this.c={};this.e=[]}var y;x.prototype.load=function(a){return new (require("es6-promise").Promise)(function(c,b){require("fs").readFile(a,function(a,e){a?b(Error("Error while loading %{path} with error %{err}")):c(e.toString())})})};x.prototype.f=function(a){return new (require("es6-promise").Promise)(function(c){function b(){!1===z(this,d)?setInterval(b,10):c(e)}var d=eval(a),e=[];b()})};
function z(a,c){var b=y;function d(a,d){for(;;)switch(e){case 0:r=h(c),g=r.next();case 1:if(g.a){e=3;break}f=g.value;switch(f.type){case q:var m=new v(f.id,f.name,f.tagRefs||[]);n.e.push(m);break;case s:m=new w(f.id,f.name,f.tagRefs||[]),t[m.id.toString()]=m}if(!(0>=b--)){e=4;break}e=5;return{value:!1,a:!1};case 5:if(void 0===d){e=6;break}e=-1;throw d;case 6:b=k=a;case 4:case 2:g=r.next();e=1;break;case 3:return e=-1,{value:!0,a:!0};default:return{value:void 0,a:!0}}}var e=0,k,f,g,r,n=a;return{d:function(){return this},
next:function(a){return d(a,void 0)},h:function(a){return d(void 0,a)}}}x.prototype.b=function(a){return new (require("es6-promise").Promise)(function(c){function b(){!1===A(a)?setInterval(b,10):c(a)}b()})};
function A(a){var c=y;function b(b,n){for(;;)switch(d){case 0:g=h(a),f=g.next();case 1:if(f.a){d=3;break}k=f.value;k.b();if(!(0>=c--)){d=4;break}d=5;return{value:!1,a:!1};case 5:if(void 0===n){d=6;break}d=-1;throw n;case 6:c=e=b;case 4:case 2:f=g.next();d=1;break;case 3:return d=-1,{value:!0,a:!0};default:return{value:void 0,a:!0}}}var d=0,e,k,f,g;return{d:function(){return this},next:function(a){return b(a,void 0)},h:function(a){return b(void 0,a)}}}var B=new x;
B.load("./data.json").then(B.f).then(B.b).then(console.log,console.error);
