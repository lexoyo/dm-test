function g(a){if(a.c)return a.c();if(!(a instanceof Array))throw Error();var b=0;return{next:function(){return b==a.length?{a:!0}:{a:!1,value:a[b++]}}}}function l(a,b,d,c){this.id=a;this.name=b;this.type=d;this.g=c;this.b=null;m=m||{}}var m;l.prototype.d=function(){if(!this.b){var a=this;this.b=[];this.g.forEach(function(b){b=m[b.toString()];console.log(b.name," initialized");a.b.push(b);b.d()})}};function n(a){a.b||a.d();return a.b.reduce(function(a,d){return a.concat(d,n(d))},[])}
l.prototype.toString=function(){return"article"===this.type?this.name+": "+n(this).join(", "):this.name};function r(){}r.prototype.f=function(a){var b=this;return new (require("es6-promise").Promise)(function(d){var c=eval(a),e=[];b.e(s(c,e),c,e,d)})};r.prototype.e=function(a,b,d,c){!1===a.next(b,d,t).a?setTimeout(this.e.bind(this,a,b,d,c),10):c(d)};
function s(a,b){var d=t;function c(c){for(;;)switch(e){case 0:p=d,q=g(a),h=q.next();case 1:if(h.a){e=3;break}f=h.value;k=new l(f.id,f.name,f.type,f.tagRefs||[]);"article"===f.type?b.push(k):m[k.id.toString()]=k;if(!(0>=p--)){e=4;break}e=5;return{value:void 0,a:!1};case 5:if(void 0===c){e=6;break}e=-1;throw c;case 6:p=d;case 4:case 2:h=q.next();e=1;break;case 3:e=-1;default:return{value:void 0,a:!0}}}var e=0,k,f,h,q,p;return{c:function(){return this},next:function(){return c(void 0)},h:function(a){return c(a)}}}
;function u(){t=2}var t;u.prototype.load=function(a){return new (require("es6-promise").Promise)(function(b,d){require("fs").readFile(a,function(c,e){c?d(Error("Error while loading "+a+" with error "+c)):b(e.toString())})})};var v=new u,w=new r;v.load(__dirname+"/data.json").then(w.f.bind(w)).then(function(a){console.log(a.join("\n").toString())},function(a){console.error("error",a)});
